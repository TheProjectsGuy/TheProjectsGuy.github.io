function scrambledStringInit(t,s,e){for(init_string=e,init_scrambled_string=e,init_scrambled_string_indices=[],this.scrambledString=scrambledString,i=0;i<init_string.length;i++)init_scrambled_string_indices[i]=i;this.scrambledString(t,s,init_scrambled_string,init_scrambled_string_indices)}function scrambledString(i,t,s,e){this.tag=i,this.objName=t,this.string=s,this.indices=e,this.rescramble=rescramble,this.initAnimatedBubbleSort=initAnimatedBubbleSort,this.bubbleSortStep=bubbleSortStep,this.bubbleSortBookmark=0,this.rescramble(),this.tag.innerHTML=this.string+' <a href="#" onClick="'+this.objName+'.initAnimatedBubbleSort();return false;">unscramble</a>'}function rescramble(){for(i=0;i<this.indices.length;i++)indexToMove=Math.floor(Math.random()*(this.indices.length-i)),charIndexRemoved=this.indices.splice(indexToMove,1),this.indices=this.indices.concat(charIndexRemoved),scrambledStringTemp=this.string.substring(0,indexToMove)+this.string.substring(indexToMove+1)+this.string.substring(indexToMove,indexToMove+1),this.string=scrambledStringTemp}function initAnimatedBubbleSort(){this.interval=setInterval(this.objName+".bubbleSortStep()",5)}function bubbleSortStep(){for(this.bubbleSortBookmark>=this.indices.length-1&&(this.bubbleSortBookmark=0),i=this.bubbleSortBookmark;i<this.indices.length-1;i++)if(0==i&&(this.changed=0),this.indices[i]>this.indices[i+1]){this.changed=1,tempIndex=this.indices[i],this.indices[i]=this.indices[i+1],this.indices[i+1]=tempIndex,tempArrange=this.string.substring(0,i)+this.string.substring(i+1,i+2)+this.string.substring(i,i+1)+this.string.substring(i+2),this.string=tempArrange,this.tag.innerHTML=this.string,this.bubbleSortBookmark=i;break}this.bubbleSortBookmark=i,this.changed||clearInterval(this.interval)}