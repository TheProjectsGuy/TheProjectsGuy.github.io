<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Creating a Python Project with Docs | Avneesh Mishra</title> <meta name="author" content="Avneesh Mishra"> <meta name="description" content="Python project + ReadTheDocs + Python Poetry + PyEnv"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.ico"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://theprojectsguy.github.io/blog/2022/projrepo/"> <script src="/assets/js/scramble.js"></script> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Avneesh </span>Mishra</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Repositories</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV</a> </li> <li class="nav-item "> <a class="nav-link" href="/courses/">Courses</a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">More</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/publications/">Publications</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/projects/">Projects</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/gists/">Gists</a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Creating a Python Project with Docs</h1> <p class="post-meta">December 17, 2022</p> <p class="post-tags"> <a href="/blog/2022"> <i class="fas fa-calendar fa-sm"></i> 2022 </a>   ·   <a href="/blog/tag/template"> <i class="fas fa-hashtag fa-sm"></i> template</a>   </p> </header> <article class="post-content"> <p>This is a template I use to create projects and docs. This page is to give a special emphasis on docs. I’ll be creating a project named <code class="language-plaintext highlighter-rouge">FeatMF</code>.</p> <h2 id="table-of-contents">Table of contents</h2> <ul> <li><a href="#table-of-contents">Table of contents</a></li> <li><a href="#pre-requisites">Pre-requisites</a></li> <li> <a href="#steps">Steps</a> <ul> <li><a href="#step-1-setup-the-empty-repository-locally">Step 1: Setup the empty repository locally</a></li> <li><a href="#step-2-upload-the-repository-to-github">Step 2: Upload the repository to GitHub</a></li> <li><a href="#step-3-setup-python-poetry">Step 3: Setup Python Poetry</a></li> <li> <a href="#step-4-create-documentation">Step 4: Create Documentation</a> <ul> <li><a href="#create-local-docs">Create Local Docs</a></li> <li><a href="#choose-a-theme">Choose a Theme</a></li> <li><a href="#deploy">Deploy</a></li> <li><a href="#recommendations">Recommendations</a></li> </ul> </li> </ul> </li> <li><a href="#references">References</a></li> </ul> <h2 id="pre-requisites">Pre-requisites</h2> <p>You must have the following</p> <ul> <li>A <a href="https://github.com/" rel="external nofollow noopener" target="_blank">github</a> account. I prefer to have SSH keys and <code class="language-plaintext highlighter-rouge">gh</code> <a href="https://cli.github.com/" rel="external nofollow noopener" target="_blank">CLI</a> setup.</li> <li>A <a href="https://readthedocs.org/" rel="external nofollow noopener" target="_blank">readthedocs</a> account with GitHub (or other platforms) connected.</li> <li>For environment management, you have <a href="https://github.com/pyenv/pyenv" rel="external nofollow noopener" target="_blank">pyenv</a> and <a href="https://python-poetry.org/" rel="external nofollow noopener" target="_blank">Python poetry</a> installed.</li> <li>Knowledge of git, bash, python environments, documentation. Some reference is included below.</li> </ul> <h2 id="steps">Steps</h2> <p>Do the following</p> <h3 id="step-1-setup-the-empty-repository-locally">Step 1: Setup the empty repository locally</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>FeatMF <span class="o">&amp;&amp;</span> <span class="nb">cd</span> <span class="nv">$_</span>
git init <span class="nt">-b</span> main
<span class="nb">touch </span>README.rst
</code></pre></div></div> <p>Add other things like IDE files, <code class="language-plaintext highlighter-rouge">.gitignore</code> files, etc. We’ll choose the <a href="https://choosealicense.com/licenses/lgpl-3.0/" rel="external nofollow noopener" target="_blank">GNU LGPL v3</a> license.</p> <p>Add the first commit</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add <span class="nt">--all</span>
git commit <span class="nt">-m</span> <span class="s2">"First commit"</span>
</code></pre></div></div> <h3 id="step-2-upload-the-repository-to-github">Step 2: Upload the repository to GitHub</h3> <ul> <li>On GitHub (or any git hosting platform), create repository with no README or LICENSE (everything will be uploaded from local).</li> <li> <p>Add remote</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>  git remote add origin https://github.com/TheProjectsGuy/FeatMF.git
</code></pre></div> </div> </li> <li> <p>Push the changes to GitHub</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>  git push origin <span class="nt">-u</span> main
</code></pre></div> </div> </li> </ul> <h3 id="step-3-setup-python-poetry">Step 3: Setup Python Poetry</h3> <ol> <li> <p>Setup Python poetry for this project (using Python from <code class="language-plaintext highlighter-rouge">pyenv</code>)</p> <ul> <li> <p>Initialize it (an interactive menu setup follows)</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>  poetry init
</code></pre></div> </div> <p>I choose python <code class="language-plaintext highlighter-rouge">3.8</code> for this project (supported by multiple libraries), but my OS has python <code class="language-plaintext highlighter-rouge">3.10.6</code>. I do not prefer using the system interpreter (unless it’s absolutely necessary)</p> </li> <li> <p>We’ll create a <code class="language-plaintext highlighter-rouge">pyenv</code> for python <code class="language-plaintext highlighter-rouge">3.8</code> and make the local folder use that python all the time.</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>  <span class="c"># Depending on what you have in `~/.zshrc`</span>
  pyenv-init <span class="o">||</span> <span class="nb">eval</span> <span class="s2">"</span><span class="si">$(</span>pyenv init -<span class="si">)</span><span class="s2">"</span>
  <span class="c"># Install Python 3.8</span>
  pyenv <span class="nb">install </span>3.8
  pyenv <span class="nb">local </span>3.8
  python <span class="nt">--version</span>    <span class="c"># Should be 3.8.*</span>
</code></pre></div> </div> <p>I like to use my system python by default, so I have a <code class="language-plaintext highlighter-rouge">pyenv-init</code> function in my <code class="language-plaintext highlighter-rouge">~/.zshrc</code> to initialize <code class="language-plaintext highlighter-rouge">pyenv</code> (same init command).</p> </li> <li> <p>Make sure poetry uses this Python</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>  poetry <span class="nb">env </span>use python
  <span class="c"># Test that this worked</span>
  poetry shell
</code></pre></div> </div> </li> </ul> </li> <li> <p>Install core libraries through poetry</p> <p>In <code class="language-plaintext highlighter-rouge">pyproject.toml</code> file, add the dependencies. For now, we’ll just install the latest versions of <code class="language-plaintext highlighter-rouge">numpy</code>, <code class="language-plaintext highlighter-rouge">scipy</code>, <code class="language-plaintext highlighter-rouge">matplotlib</code>, <code class="language-plaintext highlighter-rouge">opencv-contrib-python</code>, and PyTorch (version 1.13).</p> <div class="language-toml highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> <span class="py">python</span> <span class="p">=</span> <span class="s">"^3.8.0"</span>
 <span class="py">numpy</span> <span class="p">=</span> <span class="s">"*"</span>
 <span class="py">scipy</span> <span class="p">=</span> <span class="s">"*"</span>
 <span class="py">matplotlib</span> <span class="p">=</span> <span class="s">"*"</span>
 <span class="py">opencv-contrib-python</span> <span class="p">=</span> <span class="s">"*"</span>
 <span class="py">torch</span> <span class="p">=</span> <span class="s">"^1.13"</span>
 <span class="py">torchvision</span> <span class="p">=</span> <span class="s">"*"</span>
 <span class="py">torchaudio</span> <span class="p">=</span> <span class="s">"*"</span>
</code></pre></div> </div> <p>Such wildcard entries are better left to the development builds. Make them concrete before releasing this to public. Run the poetry commands to install everything</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> poetry <span class="nb">install
 </span>poetry update
</code></pre></div> </div> </li> <li> <p>Show the installed packages as a tree</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> poetry show <span class="nt">--tree</span>
</code></pre></div> </div> </li> </ol> <h3 id="step-4-create-documentation">Step 4: Create Documentation</h3> <h4 id="create-local-docs">Create Local Docs</h4> <ol> <li> <p>Create entry in the <code class="language-plaintext highlighter-rouge">pyproject.toml</code> file</p> <div class="language-toml highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> <span class="nn">[tool.poetry.group.docs]</span>
 <span class="py">optional</span> <span class="p">=</span> <span class="kc">true</span>

 <span class="nn">[tool.poetry.group.docs.dependencies]</span>
 <span class="py">sphinx</span> <span class="p">=</span> <span class="py">"&gt;</span><span class="p">=</span> <span class="mf">5.2</span><span class="s">"</span><span class="err">
</span></code></pre></div> </div> <p>And install everything</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> poetry <span class="nb">install</span> <span class="nt">--with</span> docs
</code></pre></div> </div> </li> <li> <p>Create folder with basic quickstart</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> <span class="nb">cd </span>FeatMF
 poetry shell
 sphinx-quickstart docs
</code></pre></div> </div> <p>Put the <code class="language-plaintext highlighter-rouge">docs/build</code> folder in <code class="language-plaintext highlighter-rouge">.gitignore</code></p> </li> <li> <p>Build the docs</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> sphinx-build <span class="nt">-b</span> html docs/source/ docs/build/html
</code></pre></div> </div> <p>See the preview in <code class="language-plaintext highlighter-rouge">./docs/build/html/index.html</code> file</p> </li> </ol> <h4 id="choose-a-theme">Choose a Theme</h4> <ol> <li> <p>Install the theme. We’ll use the <a href="https://sphinx-themes.org/sample-sites/sphinx-rtd-theme/" rel="external nofollow noopener" target="_blank">rtc-theme</a></p> <p>In <code class="language-plaintext highlighter-rouge">pyproject.toml</code> add the theme (under the <code class="language-plaintext highlighter-rouge">docs</code> group dependencies)</p> <div class="language-toml highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> <span class="py">sphinx-rtd-theme</span> <span class="p">=</span> <span class="py">"&gt;</span><span class="p">=</span> <span class="mf">1.0</span><span class="s">"</span><span class="err">
</span></code></pre></div> </div> <p>Update poetry</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> poetry <span class="nb">install</span> <span class="nt">--with</span> docs
 poetry update
</code></pre></div> </div> </li> <li> <p>Use that theme</p> <p>In <code class="language-plaintext highlighter-rouge">./docs/source/conf.py</code>, add/change the following</p> <div class="language-py highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> <span class="n">html_theme</span> <span class="o">=</span> <span class="sh">'</span><span class="s">sphinx_rtd_theme</span><span class="sh">'</span>
</code></pre></div> </div> <p>Rebuild the site</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> sphinx-build <span class="nt">-b</span> html docs/source/ docs/build/html
</code></pre></div> </div> </li> </ol> <h4 id="deploy">Deploy</h4> <p>Deploy on <a href="https://readthedocs.org/" rel="external nofollow noopener" target="_blank">readthedocs.org</a></p> <ol> <li>Push all the latest changes to remote (GitHub)</li> <li>Import project and reach the <a href="https://readthedocs.org/dashboard/" rel="external nofollow noopener" target="_blank">dashboard</a>.</li> <li>Choose the repository in the list.</li> </ol> <h4 id="recommendations">Recommendations</h4> <ul> <li> <p>For (offline) reference, you can optionally save the entire theme (source)</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>  <span class="nb">cd</span> /scratch
  wget <span class="nt">--recursive</span> <span class="nt">--no-parent</span> https://sphinx-themes.org/sample-sites/sphinx-rtd-theme/
</code></pre></div> </div> </li> </ul> <h2 id="references">References</h2> <ul> <li><a href="https://choosealicense.com/" rel="external nofollow noopener" target="_blank">Choose a license</a></li> <li> <a href="https://python-poetry.org/" rel="external nofollow noopener" target="_blank">Python poetry</a> <ul> <li><a href="https://python-poetry.org/docs/dependency-specification/" rel="external nofollow noopener" target="_blank">Dependency Specification</a></li> <li><a href="https://python-poetry.org/docs/managing-dependencies/#dependency-groups" rel="external nofollow noopener" target="_blank">Dependency Groups</a></li> </ul> </li> <li> <a href="https://readthedocs.org/" rel="external nofollow noopener" target="_blank">Read the Docs</a> and <a href="https://www.sphinx-doc.org/en/master/index.html" rel="external nofollow noopener" target="_blank">Sphinx</a> documentation <ul> <li> <a href="https://www.sphinx-doc.org/en/master/tutorial/getting-started.html" rel="external nofollow noopener" target="_blank">Sphinx getting started</a> tutorial</li> <li> <a href="https://sphinx-themes.org/" rel="external nofollow noopener" target="_blank">Sphinx themes</a> <ul> <li> <a href="https://sphinx-themes.org/sample-sites/sphinx-rtd-theme/" rel="external nofollow noopener" target="_blank">sphinx-rtd-theme</a>: Read The Docs theme</li> </ul> </li> </ul> </li> </ul> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Avneesh Mishra. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: August 30, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>